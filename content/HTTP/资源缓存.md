# 资源缓存
## 强制缓存
### Cache-Control
|字段|解释|
|-|-|
|no-cache|客户端或者此数据不允许缓存|
|no-store|缓存应该尽快从存储器删除文档所有痕迹|
|max-age|缓存持续时间|
|public|允许代理服务器和客户端缓存|
|private|只允许客户端缓存|
|min-fresh|至少在未来n秒内缓存保持新鲜|
### Expires
已被Cache-Control代替
原因：在于Expires控制缓存的原理是使用客户端的时间与服务端返回的时间做对比，那么如果客户端与服务端的时间因为某些原因（例如时区不同；客户端和服务端有一方的时间不准确）发生误差，那么强制缓存则会直接失效，这样的话强制缓存的存在则毫无意义

## 协商缓存
1. 浏览器初次请求，服务器返回资源及资源表示
2. 浏览器再次请求，携带资源表示，服务器根据资源表示判断返回304或返回资源和新的资源标识

- 服务端缓存策略
- 服务端判断客户端资源，是否和服务端资源一样
- 一致返回304，否则返回200和最新资源

### 资源标识
|字段|解释|位置|
|-|-|-|
|Last-Modified|资源最后修改时间|Response Header|
|If-Modified-Since|资源最后修改时间|Request Header|
|Etag|资源的唯一标识|Response Header|
|If-None-Match|资源的唯一标识|Request Header|

- 优先使用Etag
- Last-Modified 只能精确到秒

## 刷新操作对缓存的影响
- 正常操作（url访问，前进后退）：强制缓存有效，协商缓存有效
- 手动刷新：强制缓存失效，协商缓存有效
- 强制刷新：都失效